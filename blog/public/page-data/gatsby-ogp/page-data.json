{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-ogp/","result":{"data":{"site":{"siteMetadata":{"title":"Inquisitiveness"}},"markdownRemark":{"id":"c68de3d0-c8d0-530a-b680-0325f32ad360","excerpt":"生成するとこんな感じの画像が出来上がります  Gatsby.jsに色々な機能を実装していますが、今回はOGP用の画像を自動生成します。OGP？なにそれという方に簡単に説明すると、OGPはOpen Graph Protocolの略でTwitterやLINE、Slack…","html":"<p>生成するとこんな感じの画像が出来上がります</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3e94da0355fe65f85c3a69aeef4cef0/c1b63/gatsbyjs_ogp_image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABk0lEQVQoz41T207CQBDlA4xR2m25FrBAoVwKhHKrIhBQY/TBSxB8wMRLwh8YY4yJfvhxdhcCIooPJ2d2dvbMzM6uj8Vz4FBjNub2f7HujG/hzC9h3XrVR0gs9uc6PrEwMlDDJiEJNUKIpolTC0QtGRNJz2JSkkN7kmdinH2qYYHl29AOxoQRNG8IrTyA1ryE1rqWvsqxhHsm4zzy799AHzyKfZYoLCrkmVnOg969k4fbt1KIg4vUzsEKHZmUbK15Ie3qKcVcgTk9Essu3SG1xysKDN8RGH0gMP6EfvRECSYIXDxDP5lSkrGoRh+Qv38vr4e3HTLFNczblS3zUk0Hut0Csz2wTAPMqkGjNQdLVmi/JHwCmfrKgL5PWwxlN5zGlhaHQtn8ZPsFpyQiFvw0FO5TiBkfzlJFP57NTthCqdnF5GGKcLKImO0ilq0iTmwQx+zqjF0Ek87G9yoEy40OXl7fYOZdFOod2NU2ivUuio0eyl4fOfcQTrOHRK4Gxcj+LShapra2gykR7I9mfoVi2Bt/1RcBCT5AE7Lb7gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"生成した画像\"\n        title=\"生成した画像\"\n        src=\"/static/e3e94da0355fe65f85c3a69aeef4cef0/fcda8/gatsbyjs_ogp_image.png\"\n        srcset=\"/static/e3e94da0355fe65f85c3a69aeef4cef0/12f09/gatsbyjs_ogp_image.png 148w,\n/static/e3e94da0355fe65f85c3a69aeef4cef0/e4a3f/gatsbyjs_ogp_image.png 295w,\n/static/e3e94da0355fe65f85c3a69aeef4cef0/fcda8/gatsbyjs_ogp_image.png 590w,\n/static/e3e94da0355fe65f85c3a69aeef4cef0/efc66/gatsbyjs_ogp_image.png 885w,\n/static/e3e94da0355fe65f85c3a69aeef4cef0/c83ae/gatsbyjs_ogp_image.png 1180w,\n/static/e3e94da0355fe65f85c3a69aeef4cef0/c1b63/gatsbyjs_ogp_image.png 1200w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Gatsby.jsに色々な機能を実装していますが、今回はOGP用の画像を自動生成します。OGP？なにそれという方に簡単に説明すると、OGPは[Open Graph Protocol]の略でTwitterやLINE、Slackに記事をシェアした際にリンクが画像とともに大きく表示される、あれです。</p>\n<p>今回はSNS等でシェアした際に表示される画像を記事のタイトルから生成します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 584px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ddae0e83fc17ca9fec6b6199a383453e/e05eb/twitter_card.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB8klEQVQoz21S23LaMBTMH5SYWJJtkI3vtrANCF8T21yGIUlb2iaZJumF9qE/kL7093sEZIa0mdnZWR1ptZKOTpzBKqTXLF+OysX8+jZMZ2Zc6WFqsIyG6ZkeygZ7FcSKT/Lic8nvZSPWnFi1AQmxIgFziAGDZwjNjoTAySkNJIMhI5T1QKa+TD3Buo/0AB04eKl9WAwQZjgA2m0jJqwYu1NkJcgcIjM6CCsWdWe8q0TI5S/MMphhEfVwMsfLn2SxJfU9aR7I7Dswzt6S9gtZ/CCzr+T8DvP1K2a5Z5Pig7Z5UuZbUt7g+gFXN+r7J3XzW5l9Uz/9AUGaRxzPEHWRwf5LHtak+EjGKxzkOG5wWBF+SdJ3eLTA+QZP1phd4KDcX/vIPBA3lzSrg2hXNSXNlhRTUi1JMSRidDUL9QC2yKTev8eGxrxRrPXm7nH7a8DSgF+waTPM2nBas7RxkgKJJkUQgHatOX5t0bqO6oSTqmxXihVRb6wHEz3gRshBQOVUc6SeC+3cO4+SDaa5IzsuaMD7Prei3IxyGLKsAXaSMikX42qZFIu+N4akPeCZhLlLAysumqvbarUZZjOWtUm5BJG1VwGv/UkNIm0veb2mPj97/p7gPyQrdmKPzs247Hkchh3Nk/p+R3OBhVBd0IDjrw7mv4J+eUIgHL9GAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Twitterに投稿した場合\"\n        title=\"Twitterに投稿した場合\"\n        src=\"/static/ddae0e83fc17ca9fec6b6199a383453e/e05eb/twitter_card.png\"\n        srcset=\"/static/ddae0e83fc17ca9fec6b6199a383453e/12f09/twitter_card.png 148w,\n/static/ddae0e83fc17ca9fec6b6199a383453e/e4a3f/twitter_card.png 295w,\n/static/ddae0e83fc17ca9fec6b6199a383453e/e05eb/twitter_card.png 584w\"\n        sizes=\"(max-width: 584px) 100vw, 584px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>※完成イメージ</p>\n<h2>利用するパッケージのインストール</h2>\n<p>OGP用画像を生成するパッケージって色々あって、かなり機能豊富なものから、必要最低限のものまですでに用意されています。しかしー　これらほぼ全て『日本語対応』していません。つらい！</p>\n<p>ということで、このブログを作った初期から探し求めていたパッケージですが、先日ついに見つけてしまったので、機能実装することができました。（フルスクラッチで作る技量はありません…）</p>\n<p>matsuken(<a href=\"https://twitter.com/_kentaro_m\">@<em>kentaro</em>m</a>) さんが作成した<a href=\"https://github.com/kentaro-m/catchy-image\">catchy-image</a>というパッケージを利用します。</p>\n<p>これはnode.jsのモジュールであって、Gatsby.js用のプラグインではありません。私が利用している環境上npmでパッケージをインストールする必要があるのでnpmパッケージに登録しました。</p>\n<p><a href=\"https://github.com/psbss/gatsby-remark-sns-images\">Gatsby-remark-sns-images</a></p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-remark-sns-images</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>インストールができたら、<code class=\"language-text\">gatsby-config.js</code>に配置します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js:gatsby-config.js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js:gatsby-config.js line-numbers\"><code class=\"language-js:gatsby-config.js\">resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n          resolve: `gatsby-remark-sns-images`,\n            options: {\n              output: {\n                directory: &#39;&#39;,\n                fileName: &#39;thumbnail.png&#39;\n              },\n              image: {\n                width: 1200,\n                height: 630,\n                backgroundColor: &#39;#15202B&#39;,\n              },\n              style: {\n                title: {\n                  fontFamily: &#39;Noto Sans CJK JP&#39;,\n                  fontColor: &#39;#1DA1F2&#39;,\n                  fontWeight: &#39;bold&#39;,\n                  fontSize: 64,\n                  paddingTop: 100,\n                  paddingBottom: 200,\n                  paddingLeft: 150,\n                  paddingRight: 150,\n                },\n                author: {\n                  fontFamily: &#39;Noto Sans CJK JP&#39;,\n                  fontColor: &#39;#DDDDDD&#39;,\n                  fontWeight: &#39;400&#39;,\n                  fontSize: 42,\n                }\n              },\n              meta: {\n                title: &#39;&#39;,\n                author: &#39;Yuki Uehara(@psnzbss)&#39;\n              },\n              fontFile: [\n                {\n                  path: require.resolve(&#39;./src/utils/fonts/NotoSansCJKjp-Bold.otf&#39;),\n                  family: &#39;Noto Sans CJK JP&#39;,\n                  weight: &#39;bold&#39;,\n                },\n                {\n                  path: require.resolve(&#39;./src/utils/fonts/NotoSansCJKjp-Regular.otf&#39;),\n                  family: &#39;Noto Sans CJK JP&#39;,\n                  weight: &#39;400&#39;,\n                },\n              ],\n              iconFile: require.resolve(&#39;./content/assets/siteicon.png&#39;),\n              timeout: 10000,\n            },\n          },</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>それぞれの設定項目の説明は<a href=\"https://github.com/psbss/gatsby-remark-sns-images\">Github</a>に書いています。</p>\n<p>設定の中で追加のフォントを利用しているので導入します。</p>\n<p><a href=\"https://www.google.com/get/noto/#sans-jpan\">https://www.google.com/get/noto/#sans-jpan</a></p>\n<p>Noto Sans CJK JP をダウンロードして、解凍します。上記の設定では中に入っている<code class=\"language-text\">NotoSansCJKjp-Regular.otf</code>と<code class=\"language-text\">NotoSansCJKjp-Bold.otf</code>のみ利用しているので、この2つのファイルを<code class=\"language-text\">./src/utils/fonts/</code>に配置します。</p>\n<p>これで準備完了です！</p>\n<p>Gatsby build でpublicディレクトリ内に生成された画像が配置されます。</p>\n<p>OGPの実際の配置方法は次の記事で、、、</p>","frontmatter":{"title":"Gatsby.jsでタイトルからOGP用画像を生成する方法","date":"2020-04-09","description":"Gatsby.jsでSNSシェアボタンを設置したのに、OGP用画像を毎回作るのが面倒なのでビルド時に一緒に作れるようにしました。","pagepath":"https://blog.ue-y.me/gatsby-ogp/thumbnail.png"}}},"pageContext":{"slug":"/gatsby-ogp/","previous":{"fields":{"slug":"/gatsby-typography/"},"frontmatter":{"title":"Gatsby.jsのfontを変更する方法(日本語フォント)"}},"next":{"fields":{"slug":"/mixed-content-error/"},"frontmatter":{"title":"Mixed content Error"}}}}}