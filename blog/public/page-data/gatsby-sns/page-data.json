{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-sns/","result":{"data":{"site":{"siteMetadata":{"title":"Inquisitiveness"}},"markdownRemark":{"id":"97314bb8-a55e-52fd-a605-0a7d71aa38b2","excerpt":"『Gatsby 使い始めたのに、SNS共有ボタンないし使いづらい』そんなお悩みを React-Share で解決します。 Agenda React-Share とは ソーシャルボタンの実装 ソースコード React-Share とは ソーシャルボタン(SNS共有ボタン)を簡単に実装するために用いるのが React…","html":"<p>『Gatsby 使い始めたのに、SNS共有ボタンないし使いづらい』そんなお悩みを React-Share で解決します。</p>\n<h2>Agenda</h2>\n<ol>\n<li>React-Share とは</li>\n<li>ソーシャルボタンの実装</li>\n<li>ソースコード</li>\n</ol>\n<h2>React-Share とは</h2>\n<p>ソーシャルボタン(SNS共有ボタン)を簡単に実装するために用いるのが <a href=\"https://github.com/nygardk/react-share#readme\">React-Share</a> というプラグインです。<br>\n本来であればURL処理やアイコンを拾ってきて設置するなど、面倒な作業をやらないといけませんが、このプラグインを利用することでほぼ一瞬でできます。<br>\nネット上には同様の記事が沢山出回っていますが、React/Gatsby初心者の私は盛大にハマってしまったので、できる限り詳しく書きます。（覚書）</p>\n<p>React-Share は2020年3月時点でかなり豊富な種類のSNSに対応しています。</p>\n<ul>\n<li>Twitter</li>\n<li>Facebook</li>\n<li>Telegram</li>\n<li>Whatsapp</li>\n<li>LinkedIn</li>\n<li>Pinterest</li>\n<li>VK</li>\n<li>Odnoklassniki</li>\n<li>Reddit</li>\n<li>Tumblr</li>\n<li>LiveJournal</li>\n<li>Viber</li>\n<li>Workplace</li>\n<li>Line</li>\n<li>Weibo</li>\n<li>Pocket</li>\n<li>Instapaper</li>\n<li>email</li>\n</ul>\n<p>といっても馴染みのないSNSが多いので、今回は以下のソーシャルボタンを実装します。</p>\n<ul>\n<li>Twitter</li>\n<li>LINE</li>\n</ul>\n<p>その他のSNSを実装したい人は、<a href=\"https://github.com/nygardk/react-share#readme\">公式ドキュメント</a>読んでくださいまし。</p>\n<h2>ソーシャルボタンの実装</h2>\n<h3>1. Install</h3>\n<p>npm でインストールする場合</p>\n<div class=\"gatsby-code-title\">bash(npm)</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save react-share</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>yarn でインストールする場合</p>\n<div class=\"gatsby-code-title\">bash(yarn)</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> react-share</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>2. 設置</h3>\n<p>設置場所はGatsby-sterter-blogを利用している人は<code class=\"language-text\">./src/templates/blog-post.js</code>に置いてあるテンプレートディレクトリ内に React-Share をインポートします。</p>\n<div class=\"gatsby-code-title\">blog-post.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  TwitterShareButton<span class=\"token punctuation\">,</span>\n  TwitterIcon<span class=\"token punctuation\">,</span>\n  LineShareButton<span class=\"token punctuation\">,</span>\n  LineIcon<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-share\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>このときファイル上部の他のモジュールをimportを行っている部分で追記します。別のソーシャルボタンも追加したい場合は同様に、importすれば簡単に利用できます。</p>\n<p>次に表示部分を変更します。\n今回はfooter直前、作者プロフィール前にソーシャルボタンを設置したいので</p>\n<div class=\"gatsby-code-title\">blog-post.js</div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// ここから</span>\n<span class=\"token operator\">&lt;</span>TwitterShareButton title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">}</span> via<span class=\"token operator\">=</span><span class=\"token string\">\"psnzbss\"</span> url<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>TwitterIcon round size<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">32</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TwitterShareButton<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>LineShareButton title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">}</span> via<span class=\"token operator\">=</span><span class=\"token string\">\"psnzbss\"</span> url<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>LineIcon round size<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">32</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>LineShareButton<span class=\"token operator\">></span>\n<span class=\"token comment\">// ここまで</span>\n<span class=\"token operator\">&lt;</span>footer<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Bio <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>footer<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>このような感じで記述しました。</p>\n<h3>解説</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// 1行目\ntitle={post.frontmatter.title + &quot;\\n&quot;}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>この部分にて記事のタイトルを指定しています。{post.frontmatter.title}というのはblog-post.jsの下の方で指定している、graphqlから拾ってきています。<br>\ngraphqlは一度<code class=\"language-text\">const post = data.markdownRemark</code>としてpostオブジェクト内に格納され、post内のfrontmatter配下titleにて定義されているので、上記のような書き方になっています。（たぶん）</p>\n<p>対してURLは<code class=\"language-text\">url={location.href}</code>にて指定しています。</p>\n<p>それぞれのソーシャルボタンには特有のオプションを付ける必要があります。例えばTwitterの場合、アカウント名を<code class=\"language-text\">via=&quot;&quot;</code>にて指定しています。</p>\n<p>ついでにここで表示するアイコンのサイズもしていします。<br>\n<code class=\"language-text\">~~Icon round size={32}</code>という部分でサイズを簡易的に指定しています。</p>\n<h2>ソースコード</h2>\n<p><a href=\"https://github.com/psbss/yuu-blog/blob/master/blog/src/templates/blog-post.js\">https://github.com/psbss/yuu-blog/blob/master/blog/src/templates/blog-post.js</a></p>","frontmatter":{"title":"React-Shareを利用してGatsby.jsにSNS共有ボタンを作る","date":"2020-03-26","description":"『Gatsby 使い始めたのに、ソーシャルボタンないし使いづらい』そんなお悩みを React-Share で解決します"}}},"pageContext":{"slug":"/gatsby-sns/","previous":{"fields":{"slug":"/myblog/"},"frontmatter":{"title":"Github actions+Gatsby.jsで最高のブログ環境を構築する"}},"next":null}}}